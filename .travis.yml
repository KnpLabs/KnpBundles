language: php

php:
  - 5.5

before_script:
    - ./bin/prepare-test-sundown-"$TRAVIS_PHP_VERSION".sh
    - cp app/config/parameters.yml.test app/config/parameters.yml
    - composer install --dev
    - ./bin/prepare-test-env.sh
    - ./bin/prepare-test-solr.sh
    - mkdir -p app/cache app/logs
    - sudo chmod -R 777 app/cache app/logs
    - php app/console server:run &
    - sleep 5

script:
    - ./bin/phpunit -c app/
    - ./bin/behat --format=progress @KnpBundlesBundle

notifications:
    email:
        - travis@knplabs.com
